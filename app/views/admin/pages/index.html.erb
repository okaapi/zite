<h1>Listing pages</h1>

<table cellpadding=5 >
  <thead>
    <tr>
      <th><u><%= link_to 'Name', pages_path( by_name: 'true' ) %></u></th>
      <th>Owner</th>
      <th>Visibility</th>
      <th>Editability</th>
      <th>Menu</th>
      <th><u><%= link_to 'Last', pages_path %></u></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @pages.each do |page| %>
      <tr>
        <td><%= link_to page.name, root_path + page.name %></td>
        <td><%= User.where( id: page.user_id ).count == 0 ? page.user_id  : User.find( page.user_id ).username  %></td>
        <td><%= page.visibility %></td>
        <td><%= page.editability %></td>
        <td><%= page.menu %></td>
        <td><small><%= prettytime( page.updated_at ) %></small></td>        
        <td>&nbsp;<%= link_to 'Show', page %></td>
        <td><%= link_to 'Edit', edit_page_path(page) %></td>
        <td><%= link_to 'Destroy', page, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Page', new_page_path %>
